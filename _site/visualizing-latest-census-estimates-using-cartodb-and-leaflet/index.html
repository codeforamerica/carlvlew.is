<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.5.0 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Visualizing 2012 census estimates using cartodb and leaflet - carlvlew.is</title>




<meta name="description" content="I’ve been tinkering around with some new mapping tools lately, and figured I’d put them to good use by displaying the 2011-2012 population estimates released last week by the U.S. Census Bureau. The inherently geographical nature of the census makes it a data set just begging to be mapped.Rather than the de facto Google Maps JavaScript API V3, I decided to go with CartoDB and Leaflet to see what I could produce.As I mentioned in a recent post, CartoDB offers an excellent Fusions-esque interface, although it allows for far less front-end customization and requires more beneath the hood programming. Nonetheless, CartoDB can make pretty maps right out of the box, which you can then fully customize using the CartoDB API and basic SQL statements. There’s one caveat, however: The service only allows you to upload 5 tables for free. That could be a dealbreaker for cash-strapped news organizations and freelance data journalists.Anyhow, I downloaded a .zip shapefile package of all 159 Georgia counties from the U.S. Census Bureau, then brought the package into CartoDB using the service’s default upload interface. Using Excel, I calculated the percent change from the most recent population estimates to last year’s estimates. I then added the resulting values as a column in my CartoDB table, which you can see here.After playing a bit with the API, I was able to format a diverging chloropleth map from my table with the following style parameters, written using 0to255 to ensure an equidistant color scheme:#statewidepop {   line-color:#FFFFFF;   line-width:1;   line-opacity:0.52;   polygon-opacity:1;}#statewidepop [percent_change&lt;=5.5] {   polygon-fill:#558740}#statewidepop [percent_change&lt;=4] {   polygon-fill:#609948}#statewidepop [percent_change&lt;=3] {   polygon-fill:#6AA84F}#statewidepop [percent_change&lt;=2.25] {   polygon-fill:#BECFA8}#statewidepop [percent_change&lt;=1.5] {   polygon-fill:#D0D8BB}#statewidepop [percent_change&lt;=0.75] {   polygon-fill:#B8CCA1}#statewidepop [percent_change&lt;=0.3] {   polygon-fill:#D9DCC4}#statewidepop [percent_change&lt;=0] {   polygon-fill:#D3BAAF}#statewidepop [percent_change&lt;=-0.5] {   polygon-fill:#E7D1C5}#statewidepop [percent_change&lt;=-1] {   polygon-fill:#D8A696}#statewidepop [percent_change&lt;=-2] {   polygon-fill:#C36E59}#statewidepop [percent_change&lt;=-3] {   polygon-fill:#BC5942}#statewidepop [percent_change&lt;=-4] {   polygon-fill:#B34027}#tl_2009_13_county[percent_change&lt;=-5] {   polygon-fill:#AB2B10}Check out the resulting map:The map above shows the percent change in population from July 2010 to July 2011 in all 159 Georgia counties, as estimated by the U.S. Census Bureau. The darker the green, the higher the positive percent change. The darker the red, the higher the negative percent change. Click on a county to see its percent change.Pretty nice, huh? But what if I want to customize the style of the pop-up windows or perform more advanced functions like creating custom image markers or switching between layers? That’s where Leaflet, an open-source JavaScript library, comes in handy.Using the Leaflet libraryThe map above displays the estimated percent change in population of various midstate counties between July 2011 and July 2012. The greener the county, the higher its percent increase. The deeper red the county, the higher its percent decrease. Click on a county to see more precise totals, or select a group from the dropdown in the top right corner for a breakdown of the population changes by race.To get a wider range of flexibility, I called up a segment of the statewide data – the counties within the Macon/Warner Robins metropolitan area – using the Leaflet javascript. Leaflet allows you to reference layers from CartoDB or Google Maps from within its API, making integration a breeze. All you have to do is reference a few lines of code and your CartoDB data will appear as a layer on your Leaflet map automagically. But even on its own, Leaflet is pretty robust, especially for being so lightweight.In the map above, I took the county shapefile package from earlier, converted it to GeoJSON using QGis, then, following these parameters, called up the GeoJSON data for the selected counties using the Leaflet script. For the underlying map tiles, I created a custom style using Cloudmade, then referenced it using my API key and the following line of script:var cloudmade = new L.TileLayer(&#39;http://{s}.tile.cloudmade.com/41fc7e18cef34d6fb34756efd8240787/63501/256/{z}/{x}/{y}.png&#39;,Because I also wanted to show a breakdown of the data by race for the same geography, I added in a custom control menu that allows the user to switch between layers for easy comparison. In addition, I styled the popup to my liking, with green and red values to connote increase and decrease.From there, I was able to add in the additional data sets of population change by race. For each demographic group, I created a corresponding layer group. Each layer group contained the data as well as the appropriate styles and colors. See the source code below:var totalLayer = new L.LayerGroup();citiesLayer.addLayer(geojsononeLayer)           .addLayer(geojsontwoLayer)           .addLayer(geojsonthreeLayer)           .addLayer(geojsonfourLayer)           .addLayer(geojsonfiveLayer)           .addLayer(geojsonsevenLayer)           .addLayer(geojsoneightLayer);var whiteLayer = new L.LayerGroup();whiteLayer.addLayer(geojsononewhiteLayer)           .addLayer(geojsontwowhiteLayer)           .addLayer(geojsonthreewhiteLayer)           .addLayer(geojsonfourwhiteLayer)           .addLayer(geojsonfivewhiteLayer)           .addLayer(geojsonsevenwhiteLayer)           .addLayer(geojsoneightwhiteLayer);var blackLayer = new L.LayerGroup();blackLayer.addLayer(geojsononeblackLayer)           .addLayer(geojsontwoblackLayer)           .addLayer(geojsonthreeblackLayer)           .addLayer(geojsonfourblackLayer)           .addLayer(geojsonfiveblackLayer)           .addLayer(geojsonsevenblackLayer)           .addLayer(geojsoneightblackLayer);var asianLayer = new L.LayerGroup();asianLayer.addLayer(geojsononeasianLayer)           .addLayer(geojsontwoasianLayer)           .addLayer(geojsonthreeasianLayer)           .addLayer(geojsonfourasianLayer)           .addLayer(geojsonfiveasianLayer)           .addLayer(geojsonsevenasianLayer)           .addLayer(geojsoneightasianLayer);var otherLayer = new L.LayerGroup();otherLayer.addLayer(geojsononeotherLayer)           .addLayer(geojsontwootherLayer)           .addLayer(geojsonthreeotherLayer)           .addLayer(geojsonfourotherLayer)           .addLayer(geojsonfiveotherLayer)           .addLayer(geojsonsevenotherLayer)           .addLayer(geojsoneightotherLayer);map.addLayer(citiesLayer);var overlayMaps = {    &quot;Total Population&quot;: citiesLayer,    &quot;White&quot;: whiteLayer,    &quot;Black&quot;: blackLayer,    &quot;Asian&quot;: asianLayer,    &quot;Other/Mixed&quot;: otherLayer};var layersControl = new L.Control.Layers(overlayMaps);map.addControl(layersControl);All of this was accomplished using the built-in components of the Leaflet JavaScript API and only an hour or so of data analysis in Excel. Next goal? Adding mouseover capabilities. ">




<meta name="author" content="Carl V. Lewis">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="carlvlew.is">
<meta property="og:title" content="Visualizing 2012 census estimates using CartoDB and Leaflet">


  <link rel="canonical" href="http://localhost:4000/carlvlew.is/visualizing-latest-census-estimates-using-cartodb-and-leaflet/">
  <meta property="og:url" content="http://localhost:4000/carlvlew.is/visualizing-latest-census-estimates-using-cartodb-and-leaflet/">



  <meta property="og:description" content="I’ve been tinkering around with some new mapping tools lately, and figured I’d put them to good use by displaying the 2011-2012 population estimates released last week by the U.S. Census Bureau. The inherently geographical nature of the census makes it a data set just begging to be mapped.Rather than the de facto Google Maps JavaScript API V3, I decided to go with CartoDB and Leaflet to see what I could produce.As I mentioned in a recent post, CartoDB offers an excellent Fusions-esque interface, although it allows for far less front-end customization and requires more beneath the hood programming. Nonetheless, CartoDB can make pretty maps right out of the box, which you can then fully customize using the CartoDB API and basic SQL statements. There’s one caveat, however: The service only allows you to upload 5 tables for free. That could be a dealbreaker for cash-strapped news organizations and freelance data journalists.Anyhow, I downloaded a .zip shapefile package of all 159 Georgia counties from the U.S. Census Bureau, then brought the package into CartoDB using the service’s default upload interface. Using Excel, I calculated the percent change from the most recent population estimates to last year’s estimates. I then added the resulting values as a column in my CartoDB table, which you can see here.After playing a bit with the API, I was able to format a diverging chloropleth map from my table with the following style parameters, written using 0to255 to ensure an equidistant color scheme:#statewidepop {   line-color:#FFFFFF;   line-width:1;   line-opacity:0.52;   polygon-opacity:1;}#statewidepop [percent_change&lt;=5.5] {   polygon-fill:#558740}#statewidepop [percent_change&lt;=4] {   polygon-fill:#609948}#statewidepop [percent_change&lt;=3] {   polygon-fill:#6AA84F}#statewidepop [percent_change&lt;=2.25] {   polygon-fill:#BECFA8}#statewidepop [percent_change&lt;=1.5] {   polygon-fill:#D0D8BB}#statewidepop [percent_change&lt;=0.75] {   polygon-fill:#B8CCA1}#statewidepop [percent_change&lt;=0.3] {   polygon-fill:#D9DCC4}#statewidepop [percent_change&lt;=0] {   polygon-fill:#D3BAAF}#statewidepop [percent_change&lt;=-0.5] {   polygon-fill:#E7D1C5}#statewidepop [percent_change&lt;=-1] {   polygon-fill:#D8A696}#statewidepop [percent_change&lt;=-2] {   polygon-fill:#C36E59}#statewidepop [percent_change&lt;=-3] {   polygon-fill:#BC5942}#statewidepop [percent_change&lt;=-4] {   polygon-fill:#B34027}#tl_2009_13_county[percent_change&lt;=-5] {   polygon-fill:#AB2B10}Check out the resulting map:The map above shows the percent change in population from July 2010 to July 2011 in all 159 Georgia counties, as estimated by the U.S. Census Bureau. The darker the green, the higher the positive percent change. The darker the red, the higher the negative percent change. Click on a county to see its percent change.Pretty nice, huh? But what if I want to customize the style of the pop-up windows or perform more advanced functions like creating custom image markers or switching between layers? That’s where Leaflet, an open-source JavaScript library, comes in handy.Using the Leaflet libraryThe map above displays the estimated percent change in population of various midstate counties between July 2011 and July 2012. The greener the county, the higher its percent increase. The deeper red the county, the higher its percent decrease. Click on a county to see more precise totals, or select a group from the dropdown in the top right corner for a breakdown of the population changes by race.To get a wider range of flexibility, I called up a segment of the statewide data – the counties within the Macon/Warner Robins metropolitan area – using the Leaflet javascript. Leaflet allows you to reference layers from CartoDB or Google Maps from within its API, making integration a breeze. All you have to do is reference a few lines of code and your CartoDB data will appear as a layer on your Leaflet map automagically. But even on its own, Leaflet is pretty robust, especially for being so lightweight.In the map above, I took the county shapefile package from earlier, converted it to GeoJSON using QGis, then, following these parameters, called up the GeoJSON data for the selected counties using the Leaflet script. For the underlying map tiles, I created a custom style using Cloudmade, then referenced it using my API key and the following line of script:var cloudmade = new L.TileLayer(&#39;http://{s}.tile.cloudmade.com/41fc7e18cef34d6fb34756efd8240787/63501/256/{z}/{x}/{y}.png&#39;,Because I also wanted to show a breakdown of the data by race for the same geography, I added in a custom control menu that allows the user to switch between layers for easy comparison. In addition, I styled the popup to my liking, with green and red values to connote increase and decrease.From there, I was able to add in the additional data sets of population change by race. For each demographic group, I created a corresponding layer group. Each layer group contained the data as well as the appropriate styles and colors. See the source code below:var totalLayer = new L.LayerGroup();citiesLayer.addLayer(geojsononeLayer)           .addLayer(geojsontwoLayer)           .addLayer(geojsonthreeLayer)           .addLayer(geojsonfourLayer)           .addLayer(geojsonfiveLayer)           .addLayer(geojsonsevenLayer)           .addLayer(geojsoneightLayer);var whiteLayer = new L.LayerGroup();whiteLayer.addLayer(geojsononewhiteLayer)           .addLayer(geojsontwowhiteLayer)           .addLayer(geojsonthreewhiteLayer)           .addLayer(geojsonfourwhiteLayer)           .addLayer(geojsonfivewhiteLayer)           .addLayer(geojsonsevenwhiteLayer)           .addLayer(geojsoneightwhiteLayer);var blackLayer = new L.LayerGroup();blackLayer.addLayer(geojsononeblackLayer)           .addLayer(geojsontwoblackLayer)           .addLayer(geojsonthreeblackLayer)           .addLayer(geojsonfourblackLayer)           .addLayer(geojsonfiveblackLayer)           .addLayer(geojsonsevenblackLayer)           .addLayer(geojsoneightblackLayer);var asianLayer = new L.LayerGroup();asianLayer.addLayer(geojsononeasianLayer)           .addLayer(geojsontwoasianLayer)           .addLayer(geojsonthreeasianLayer)           .addLayer(geojsonfourasianLayer)           .addLayer(geojsonfiveasianLayer)           .addLayer(geojsonsevenasianLayer)           .addLayer(geojsoneightasianLayer);var otherLayer = new L.LayerGroup();otherLayer.addLayer(geojsononeotherLayer)           .addLayer(geojsontwootherLayer)           .addLayer(geojsonthreeotherLayer)           .addLayer(geojsonfourotherLayer)           .addLayer(geojsonfiveotherLayer)           .addLayer(geojsonsevenotherLayer)           .addLayer(geojsoneightotherLayer);map.addLayer(citiesLayer);var overlayMaps = {    &quot;Total Population&quot;: citiesLayer,    &quot;White&quot;: whiteLayer,    &quot;Black&quot;: blackLayer,    &quot;Asian&quot;: asianLayer,    &quot;Other/Mixed&quot;: otherLayer};var layersControl = new L.Control.Layers(overlayMaps);map.addControl(layersControl);All of this was accomplished using the built-in components of the Leaflet JavaScript API and only an hour or so of data analysis in Excel. Next goal? Adding mouseover capabilities. ">



  <meta name="twitter:site" content="@carlvlewis">
  <meta name="twitter:title" content="Visualizing 2012 census estimates using CartoDB and Leaflet">
  <meta name="twitter:description" content="I’ve been tinkering around with some new mapping tools lately, and figured I’d put them to good use by displaying the 2011-2012 population estimates released last week by the U.S. Census Bureau. The inherently geographical nature of the census makes it a data set just begging to be mapped.Rather than the de facto Google Maps JavaScript API V3, I decided to go with CartoDB and Leaflet to see what I could produce.As I mentioned in a recent post, CartoDB offers an excellent Fusions-esque interface, although it allows for far less front-end customization and requires more beneath the hood programming. Nonetheless, CartoDB can make pretty maps right out of the box, which you can then fully customize using the CartoDB API and basic SQL statements. There’s one caveat, however: The service only allows you to upload 5 tables for free. That could be a dealbreaker for cash-strapped news organizations and freelance data journalists.Anyhow, I downloaded a .zip shapefile package of all 159 Georgia counties from the U.S. Census Bureau, then brought the package into CartoDB using the service’s default upload interface. Using Excel, I calculated the percent change from the most recent population estimates to last year’s estimates. I then added the resulting values as a column in my CartoDB table, which you can see here.After playing a bit with the API, I was able to format a diverging chloropleth map from my table with the following style parameters, written using 0to255 to ensure an equidistant color scheme:#statewidepop {   line-color:#FFFFFF;   line-width:1;   line-opacity:0.52;   polygon-opacity:1;}#statewidepop [percent_change&lt;=5.5] {   polygon-fill:#558740}#statewidepop [percent_change&lt;=4] {   polygon-fill:#609948}#statewidepop [percent_change&lt;=3] {   polygon-fill:#6AA84F}#statewidepop [percent_change&lt;=2.25] {   polygon-fill:#BECFA8}#statewidepop [percent_change&lt;=1.5] {   polygon-fill:#D0D8BB}#statewidepop [percent_change&lt;=0.75] {   polygon-fill:#B8CCA1}#statewidepop [percent_change&lt;=0.3] {   polygon-fill:#D9DCC4}#statewidepop [percent_change&lt;=0] {   polygon-fill:#D3BAAF}#statewidepop [percent_change&lt;=-0.5] {   polygon-fill:#E7D1C5}#statewidepop [percent_change&lt;=-1] {   polygon-fill:#D8A696}#statewidepop [percent_change&lt;=-2] {   polygon-fill:#C36E59}#statewidepop [percent_change&lt;=-3] {   polygon-fill:#BC5942}#statewidepop [percent_change&lt;=-4] {   polygon-fill:#B34027}#tl_2009_13_county[percent_change&lt;=-5] {   polygon-fill:#AB2B10}Check out the resulting map:The map above shows the percent change in population from July 2010 to July 2011 in all 159 Georgia counties, as estimated by the U.S. Census Bureau. The darker the green, the higher the positive percent change. The darker the red, the higher the negative percent change. Click on a county to see its percent change.Pretty nice, huh? But what if I want to customize the style of the pop-up windows or perform more advanced functions like creating custom image markers or switching between layers? That’s where Leaflet, an open-source JavaScript library, comes in handy.Using the Leaflet libraryThe map above displays the estimated percent change in population of various midstate counties between July 2011 and July 2012. The greener the county, the higher its percent increase. The deeper red the county, the higher its percent decrease. Click on a county to see more precise totals, or select a group from the dropdown in the top right corner for a breakdown of the population changes by race.To get a wider range of flexibility, I called up a segment of the statewide data – the counties within the Macon/Warner Robins metropolitan area – using the Leaflet javascript. Leaflet allows you to reference layers from CartoDB or Google Maps from within its API, making integration a breeze. All you have to do is reference a few lines of code and your CartoDB data will appear as a layer on your Leaflet map automagically. But even on its own, Leaflet is pretty robust, especially for being so lightweight.In the map above, I took the county shapefile package from earlier, converted it to GeoJSON using QGis, then, following these parameters, called up the GeoJSON data for the selected counties using the Leaflet script. For the underlying map tiles, I created a custom style using Cloudmade, then referenced it using my API key and the following line of script:var cloudmade = new L.TileLayer(&#39;http://{s}.tile.cloudmade.com/41fc7e18cef34d6fb34756efd8240787/63501/256/{z}/{x}/{y}.png&#39;,Because I also wanted to show a breakdown of the data by race for the same geography, I added in a custom control menu that allows the user to switch between layers for easy comparison. In addition, I styled the popup to my liking, with green and red values to connote increase and decrease.From there, I was able to add in the additional data sets of population change by race. For each demographic group, I created a corresponding layer group. Each layer group contained the data as well as the appropriate styles and colors. See the source code below:var totalLayer = new L.LayerGroup();citiesLayer.addLayer(geojsononeLayer)           .addLayer(geojsontwoLayer)           .addLayer(geojsonthreeLayer)           .addLayer(geojsonfourLayer)           .addLayer(geojsonfiveLayer)           .addLayer(geojsonsevenLayer)           .addLayer(geojsoneightLayer);var whiteLayer = new L.LayerGroup();whiteLayer.addLayer(geojsononewhiteLayer)           .addLayer(geojsontwowhiteLayer)           .addLayer(geojsonthreewhiteLayer)           .addLayer(geojsonfourwhiteLayer)           .addLayer(geojsonfivewhiteLayer)           .addLayer(geojsonsevenwhiteLayer)           .addLayer(geojsoneightwhiteLayer);var blackLayer = new L.LayerGroup();blackLayer.addLayer(geojsononeblackLayer)           .addLayer(geojsontwoblackLayer)           .addLayer(geojsonthreeblackLayer)           .addLayer(geojsonfourblackLayer)           .addLayer(geojsonfiveblackLayer)           .addLayer(geojsonsevenblackLayer)           .addLayer(geojsoneightblackLayer);var asianLayer = new L.LayerGroup();asianLayer.addLayer(geojsononeasianLayer)           .addLayer(geojsontwoasianLayer)           .addLayer(geojsonthreeasianLayer)           .addLayer(geojsonfourasianLayer)           .addLayer(geojsonfiveasianLayer)           .addLayer(geojsonsevenasianLayer)           .addLayer(geojsoneightasianLayer);var otherLayer = new L.LayerGroup();otherLayer.addLayer(geojsononeotherLayer)           .addLayer(geojsontwootherLayer)           .addLayer(geojsonthreeotherLayer)           .addLayer(geojsonfourotherLayer)           .addLayer(geojsonfiveotherLayer)           .addLayer(geojsonsevenotherLayer)           .addLayer(geojsoneightotherLayer);map.addLayer(citiesLayer);var overlayMaps = {    &quot;Total Population&quot;: citiesLayer,    &quot;White&quot;: whiteLayer,    &quot;Black&quot;: blackLayer,    &quot;Asian&quot;: asianLayer,    &quot;Other/Mixed&quot;: otherLayer};var layersControl = new L.Control.Layers(overlayMaps);map.addControl(layersControl);All of this was accomplished using the built-in components of the Leaflet JavaScript API and only an hour or so of data analysis in Excel. Next goal? Adding mouseover capabilities. ">
  <meta name="twitter:url" content="http://localhost:4000/visualizing-latest-census-estimates-using-cartodb-and-leaflet/">

  
    <meta name="twitter:card" content="summary">
    
  

  
    <meta name="twitter:creator" content="@Carl V. Lewis">
  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2012-08-06T05:53:43-04:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "@carlvlewis",
      "url" : "http://localhost:4000/carlvlew.is",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/carlvlew.is/feed.xml" type="application/atom+xml" rel="alternate" title="carlvlew.is Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/carlvlew.is/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->
<link rel="stylesheet" type="text/css" href="https://cloud.typography.com/7917556/6301972/css/fonts.css" />
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102583563-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-102583563-1');
</script>
<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://localhost:4000/carlvlew.is/">carlvlew.is</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/reporting/">News Writing</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/portfolio/">Portfolio</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/testimonials/">Testimonials</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/resources/">Resources</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/research/">Research</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://cv.carlvlewis.net">CV</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/carlvlew.is/other-projects/">Other Projects</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="http://cvlassets.s3.amazonaws.com/1697569.jpg" alt="Carl V. Lewis" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Carl V. Lewis</h3>
    
      <p class="author__bio" itemprop="description">
        data visualization, civic-tech, digital humanities, media futurism.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">38.627003, -90.1999</span>
        </li>
      

      

      
        <li>
          <a href="mailto:hello@carlvlew.is">
            <meta itemprop="email" content="hello@carlvlew.is" />
            <i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      
        <li>
          <a href="https://keybase.io/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-key" aria-hidden="true"></i> Keybase
          </a>
        </li>
      

      
        <li>
          <a href="https://github.com/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      
        <li>
          <a href="https://twitter.com/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      
        <li>
          <a href="https://plus.google.com/+carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-google-plus-square" aria-hidden="true"></i> Google+
          </a>
        </li>
      

      
        <li>
          <a href="https://www.linkedin.com/in/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      
        <li>
          <a href="https://quora.com/profile/carl-v-lewis-1" itemprop="sameAs">
            <i class="fa fa-fw fa-quora" aria-hidden="true"></i> Quora
          </a>
        </li>
      

      
        <li>
          <a href="https://opendata.stackexchange.com/users/14970/carl-v-lewis" itemprop="sameAs">
            <i class="fa fa-fw fa-stack-exchange" aria-hidden="true"></i> StackExchange
          </a>
        </li>
      

      
        <li>
          <a href="https://www.codepen.io/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i> Codepen
          </a>
        </li>
      

      
        <li>
          <a href="https://instagram.com/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-instagram" aria-hidden="true"></i> Instagram
          </a>
        </li>
      

      

      


      

      

      

      
        <li>
          <a href="https://www.pinterest.com/carlvlewis" itemprop="sameAs">
            <i class="fa fa-fw fa-pinterest" aria-hidden="true"></i> Pinterest
          </a>
        </li>
      

      

      

      

      

      

      

      

      <li>
    <a href="https://bl.ocks.org/carlvlewis" itemprop="sameAs">
      <i class="fa fa-fw fa-cubes" aria-hidden="true"></i> Bl.ocks
    </a></li>  

<li>
    <a href="https://meetup.com/opensavannah" itemprop="sameAs">
      <i class="fa fa-fw fa-meetup" aria-hidden="true"></i> Meetup
    </a></li>
  <li>
    <a href="https://slideshare.com/opensavannah" itemprop="sameAs">
      <i class="fa fa-fw fa-slideshare" aria-hidden="true"></i> Slideshare
    </a></li>
<li>
    <a href="https://medium.com/@carlvlewis" itemprop="sameAs">
      <i class="fa fa-fw fa-medium" aria-hidden="true"></i> Medium
    </a></li>

    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Visualizing 2012 census estimates using CartoDB and Leaflet">
    <meta itemprop="description" content="I’ve been tinkering around with some new mapping tools lately, and figured I’d put them to good use by displaying the 2011-2012 population estimates released last week by the U.S. Census Bureau. The inherently geographical nature of the census makes it a data set just begging to be mapped.Rather than the de facto Google Maps JavaScript API V3, I decided to go with CartoDB and Leaflet to see what I could produce.As I mentioned in a recent post, CartoDB offers an excellent Fusions-esque interface, although it allows for far less front-end customization and requires more beneath the hood programming. Nonetheless, CartoDB can make pretty maps right out of the box, which you can then fully customize using the CartoDB API and basic SQL statements. There’s one caveat, however: The service only allows you to upload 5 tables for free. That could be a dealbreaker for cash-strapped news organizations and freelance data journalists.Anyhow, I downloaded a .zip shapefile package of all 159 Georgia counties from the U.S. Census Bureau, then brought the package into CartoDB using the service’s default upload interface. Using Excel, I calculated the percent change from the most recent population estimates to last year’s estimates. I then added the resulting values as a column in my CartoDB table, which you can see here.After playing a bit with the API, I was able to format a diverging chloropleth map from my table with the following style parameters, written using 0to255 to ensure an equidistant color scheme:#statewidepop {   line-color:#FFFFFF;   line-width:1;   line-opacity:0.52;   polygon-opacity:1;}#statewidepop [percent_change&lt;=5.5] {   polygon-fill:#558740}#statewidepop [percent_change&lt;=4] {   polygon-fill:#609948}#statewidepop [percent_change&lt;=3] {   polygon-fill:#6AA84F}#statewidepop [percent_change&lt;=2.25] {   polygon-fill:#BECFA8}#statewidepop [percent_change&lt;=1.5] {   polygon-fill:#D0D8BB}#statewidepop [percent_change&lt;=0.75] {   polygon-fill:#B8CCA1}#statewidepop [percent_change&lt;=0.3] {   polygon-fill:#D9DCC4}#statewidepop [percent_change&lt;=0] {   polygon-fill:#D3BAAF}#statewidepop [percent_change&lt;=-0.5] {   polygon-fill:#E7D1C5}#statewidepop [percent_change&lt;=-1] {   polygon-fill:#D8A696}#statewidepop [percent_change&lt;=-2] {   polygon-fill:#C36E59}#statewidepop [percent_change&lt;=-3] {   polygon-fill:#BC5942}#statewidepop [percent_change&lt;=-4] {   polygon-fill:#B34027}#tl_2009_13_county[percent_change&lt;=-5] {   polygon-fill:#AB2B10}Check out the resulting map:The map above shows the percent change in population from July 2010 to July 2011 in all 159 Georgia counties, as estimated by the U.S. Census Bureau. The darker the green, the higher the positive percent change. The darker the red, the higher the negative percent change. Click on a county to see its percent change.Pretty nice, huh? But what if I want to customize the style of the pop-up windows or perform more advanced functions like creating custom image markers or switching between layers? That’s where Leaflet, an open-source JavaScript library, comes in handy.Using the Leaflet libraryThe map above displays the estimated percent change in population of various midstate counties between July 2011 and July 2012. The greener the county, the higher its percent increase. The deeper red the county, the higher its percent decrease. Click on a county to see more precise totals, or select a group from the dropdown in the top right corner for a breakdown of the population changes by race.To get a wider range of flexibility, I called up a segment of the statewide data – the counties within the Macon/Warner Robins metropolitan area – using the Leaflet javascript. Leaflet allows you to reference layers from CartoDB or Google Maps from within its API, making integration a breeze. All you have to do is reference a few lines of code and your CartoDB data will appear as a layer on your Leaflet map automagically. But even on its own, Leaflet is pretty robust, especially for being so lightweight.In the map above, I took the county shapefile package from earlier, converted it to GeoJSON using QGis, then, following these parameters, called up the GeoJSON data for the selected counties using the Leaflet script. For the underlying map tiles, I created a custom style using Cloudmade, then referenced it using my API key and the following line of script:var cloudmade = new L.TileLayer(&#39;http://{s}.tile.cloudmade.com/41fc7e18cef34d6fb34756efd8240787/63501/256/{z}/{x}/{y}.png&#39;,Because I also wanted to show a breakdown of the data by race for the same geography, I added in a custom control menu that allows the user to switch between layers for easy comparison. In addition, I styled the popup to my liking, with green and red values to connote increase and decrease.From there, I was able to add in the additional data sets of population change by race. For each demographic group, I created a corresponding layer group. Each layer group contained the data as well as the appropriate styles and colors. See the source code below:var totalLayer = new L.LayerGroup();citiesLayer.addLayer(geojsononeLayer)           .addLayer(geojsontwoLayer)           .addLayer(geojsonthreeLayer)           .addLayer(geojsonfourLayer)           .addLayer(geojsonfiveLayer)           .addLayer(geojsonsevenLayer)           .addLayer(geojsoneightLayer);var whiteLayer = new L.LayerGroup();whiteLayer.addLayer(geojsononewhiteLayer)           .addLayer(geojsontwowhiteLayer)           .addLayer(geojsonthreewhiteLayer)           .addLayer(geojsonfourwhiteLayer)           .addLayer(geojsonfivewhiteLayer)           .addLayer(geojsonsevenwhiteLayer)           .addLayer(geojsoneightwhiteLayer);var blackLayer = new L.LayerGroup();blackLayer.addLayer(geojsononeblackLayer)           .addLayer(geojsontwoblackLayer)           .addLayer(geojsonthreeblackLayer)           .addLayer(geojsonfourblackLayer)           .addLayer(geojsonfiveblackLayer)           .addLayer(geojsonsevenblackLayer)           .addLayer(geojsoneightblackLayer);var asianLayer = new L.LayerGroup();asianLayer.addLayer(geojsononeasianLayer)           .addLayer(geojsontwoasianLayer)           .addLayer(geojsonthreeasianLayer)           .addLayer(geojsonfourasianLayer)           .addLayer(geojsonfiveasianLayer)           .addLayer(geojsonsevenasianLayer)           .addLayer(geojsoneightasianLayer);var otherLayer = new L.LayerGroup();otherLayer.addLayer(geojsononeotherLayer)           .addLayer(geojsontwootherLayer)           .addLayer(geojsonthreeotherLayer)           .addLayer(geojsonfourotherLayer)           .addLayer(geojsonfiveotherLayer)           .addLayer(geojsonsevenotherLayer)           .addLayer(geojsoneightotherLayer);map.addLayer(citiesLayer);var overlayMaps = {    &quot;Total Population&quot;: citiesLayer,    &quot;White&quot;: whiteLayer,    &quot;Black&quot;: blackLayer,    &quot;Asian&quot;: asianLayer,    &quot;Other/Mixed&quot;: otherLayer};var layersControl = new L.Control.Layers(overlayMaps);map.addControl(layersControl);All of this was accomplished using the built-in components of the Leaflet JavaScript API and only an hour or so of data analysis in Excel. Next goal? Adding mouseover capabilities. ">
    <meta itemprop="datePublished" content="August 06, 2012">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Visualizing 2012 census estimates using CartoDB and Leaflet
</h1><p  class="page__meta">
  
    <span><i class="fa fa-clock-o" aria-hidden="true"></i>




  17 minute read
</span>,
  
  
    Posted on 
    <span>August 06, 2012</span>,
  
  
    by <span>Carl V. Lewis</span>
  
</p></header>
      

      <section class="page__content" itemprop="text">
        <p>I’ve been tinkering around with some new mapping tools lately, and figured I’d put them to good use by displaying the <a href="http://www.census.gov/popest/">2011-2012 population estimates</a> released last week by the U.S. Census Bureau. The inherently geographical nature of the census makes it a data set just begging to be mapped.</p>

<p>Rather than the de facto <a href="https://developers.google.com/maps/documentation/javascript/">Google Maps JavaScript API V3</a>, I decided to go with <a href="http://cartodb.com">CartoDB</a> and <a href="http://leaflet.cloudmade.com">Leaflet</a> to see what I could produce.</p>

<p>As I mentioned in a recent <a href="http://carlvlewis.net/?p=2422">post</a>, CartoDB offers an excellent <a href="http://google.com/fusiontables">Fusions</a>-esque interface, although it allows for far less front-end customization and requires more beneath the hood programming. Nonetheless, CartoDB can make pretty maps right out of the box, which you can then fully customize using the CartoDB API and basic SQL statements. There’s one caveat, however: The service only allows you to upload 5 tables for free. That could be a dealbreaker for cash-strapped news organizations and freelance data journalists.</p>

<p>Anyhow, I downloaded a .zip shapefile package of all 159 Georgia counties from the <a href="http://www.census.gov/geo/www/cob/co2000.html">U.S. Census Bureau</a>, then brought the package into CartoDB using the service’s default upload interface. Using Excel, I calculated the <a href="http://www.mathgoodies.com/lessons/percent/change.html">percent change</a> from the most recent population estimates to last year’s estimates. I then added the resulting values as a column in my CartoDB table, which you can see <a href="https://carlvlewis.cartodb.com/tables/2948">here</a>.</p>

<p>After playing a bit with the <a href="http://developers.cartodb.com/documentation/cartodb-apis.html">API</a>, I was able to format a diverging chloropleth map from my table with the following style parameters, written using <a href="http://0to255.com">0to255</a> to ensure an equidistant color scheme:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">#statewidepop</span> <span class="p">{</span>
   <span class="py">line-color</span><span class="p">:</span><span class="m">#FFFFFF</span><span class="p">;</span>
   <span class="py">line-width</span><span class="p">:</span><span class="m">1</span><span class="p">;</span>
   <span class="py">line-opacity</span><span class="p">:</span><span class="m">0.52</span><span class="p">;</span>
   <span class="py">polygon-opacity</span><span class="p">:</span><span class="m">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">5</span><span class="nc">.5</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#558740</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">4</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#609948</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">3</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#6AA84F</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">2</span><span class="nc">.25</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#BECFA8</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">1</span><span class="nc">.5</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#D0D8BB</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">0</span><span class="nc">.75</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#B8CCA1</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">0</span><span class="nc">.3</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#D9DCC4</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">0</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#D3BAAF</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">-0</span><span class="nc">.5</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#E7D1C5</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">-1</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#D8A696</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">-2</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#C36E59</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">-3</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#BC5942</span>
<span class="p">}</span>
<span class="nf">#statewidepop</span> <span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">-4</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#B34027</span>
<span class="p">}</span>
<span class="nf">#tl_2009_13_county</span><span class="o">[</span><span class="nt">percent_change</span><span class="o">&lt;=</span><span class="nt">-5</span><span class="o">]</span> <span class="p">{</span>
   <span class="py">polygon-fill</span><span class="p">:</span><span class="m">#AB2B10</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Check out the resulting map:</p>

<iframe src="https://carlvlewis.cartodb.com/tables/statewidepop/embed_map" width="500" height="305"></iframe>

<p><em></em></p>

<p>The map above shows the percent change in population from July 2010 to July 2011 in all 159 Georgia counties, as estimated by the U.S. Census Bureau. The darker the green, the higher the positive percent change. The darker the red, the higher the negative percent change. Click on a county to see its percent change.<br />
<!--more--></p>

<p>Pretty nice, huh? But what if I want to customize the style of the pop-up windows or perform more advanced functions like creating custom image markers or switching between layers? That’s where <a href="http://leaflet.cloudmade.com">Leaflet</a>, an open-source JavaScript library, comes in handy.</p>
<h1>Using the Leaflet library</h1>

<iframe src="http://carlvlewis.net/leaflet/home%20copy.html" frameborder="no" scrolling="no" width="530" height="305"></iframe>

<p><em>The map above displays the estimated percent change in population of various midstate counties between July 2011 and July 2012. The greener the county, the higher its percent increase. The deeper red the county, the higher its percent decrease. Click on a county to see more precise totals, or select a group from the dropdown in the top right corner for a breakdown of the population changes by race.</em></p>

<p>To get a wider range of flexibility, I called up a segment of the statewide data – the counties within the <a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=3&amp;ved=0CHsQFjAC&amp;url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FMacon%2C_Georgia&amp;ei=77LBT8O0B6al2AW6qYlk&amp;usg=AFQjCNFR3fNx8wCTK88zuWVl30ObDsMuwg">Macon/Warner Robins</a> metropolitan area – using the <a href="http://leaflet.cloudmade.com">Leaflet</a> javascript. Leaflet allows you to reference layers from CartoDB or Google Maps from within its API, making integration a breeze. All you have to do is reference a <a href="http://developers.cartodb.com/documentation/cartodb-apis.html#section-7">few lines of code</a> and your CartoDB data will appear as a layer on your Leaflet map automagically. But even on its own, Leaflet is pretty robust, especially for being so lightweight.</p>

<p>In the map above, I took the county shapefile package from earlier, converted it to GeoJSON using <a href="http://www.kyngchaos.com/software/qgis">QGis</a>, then, following these <a href="http://leaflet.cloudmade.com/reference.html#geojson">parameters</a>, called up the GeoJSON data for the selected counties using the Leaflet script. For the underlying map tiles, I created a custom style using Cloudmade, then referenced it using my API key and the following line of script:</p>
<pre class="javascript">var cloudmade = new L.TileLayer('http://{s}.tile.cloudmade.com/41fc7e18cef34d6fb34756efd8240787/63501/256/{z}/{x}/{y}.png',</pre>

<p>Because I also wanted to show a breakdown of the data by race for the same geography, I added in a <a href="http://leaflet.cloudmade.com/reference.html#control-layers">custom control</a> menu that allows the user to switch between layers for easy comparison. In addition, I styled the popup to my liking, with green and red values to connote increase and decrease.</p>

<p>From there, I was able to add in the additional data sets of population change by race. For each demographic group, I created a corresponding <a href="http://leaflet.cloudmade.com/reference.html#layergroup">layer group</a>. Each layer group contained the data as well as the appropriate styles and colors. See the source code below:</p>
<pre name="code" class="javascript">var totalLayer = new L.LayerGroup();

citiesLayer.addLayer(geojsononeLayer)
           .addLayer(geojsontwoLayer)
           .addLayer(geojsonthreeLayer)
           .addLayer(geojsonfourLayer)
           .addLayer(geojsonfiveLayer)
           .addLayer(geojsonsevenLayer)
           .addLayer(geojsoneightLayer);

var whiteLayer = new L.LayerGroup();

whiteLayer.addLayer(geojsononewhiteLayer)
           .addLayer(geojsontwowhiteLayer)
           .addLayer(geojsonthreewhiteLayer)
           .addLayer(geojsonfourwhiteLayer)
           .addLayer(geojsonfivewhiteLayer)
           .addLayer(geojsonsevenwhiteLayer)
           .addLayer(geojsoneightwhiteLayer);
var blackLayer = new L.LayerGroup();

blackLayer.addLayer(geojsononeblackLayer)
           .addLayer(geojsontwoblackLayer)
           .addLayer(geojsonthreeblackLayer)
           .addLayer(geojsonfourblackLayer)
           .addLayer(geojsonfiveblackLayer)
           .addLayer(geojsonsevenblackLayer)
           .addLayer(geojsoneightblackLayer);

var asianLayer = new L.LayerGroup();

asianLayer.addLayer(geojsononeasianLayer)
           .addLayer(geojsontwoasianLayer)
           .addLayer(geojsonthreeasianLayer)
           .addLayer(geojsonfourasianLayer)
           .addLayer(geojsonfiveasianLayer)
           .addLayer(geojsonsevenasianLayer)
           .addLayer(geojsoneightasianLayer);

var otherLayer = new L.LayerGroup();

otherLayer.addLayer(geojsononeotherLayer)
           .addLayer(geojsontwootherLayer)
           .addLayer(geojsonthreeotherLayer)
           .addLayer(geojsonfourotherLayer)
           .addLayer(geojsonfiveotherLayer)
           .addLayer(geojsonsevenotherLayer)
           .addLayer(geojsoneightotherLayer);

map.addLayer(citiesLayer);

var overlayMaps = {
    "Total Population": citiesLayer,
    "White": whiteLayer,
    "Black": blackLayer,
    "Asian": asianLayer,
    "Other/Mixed": otherLayer
};

var layersControl = new L.Control.Layers(overlayMaps);

map.addControl(layersControl);</pre>

<p>All of this was accomplished using the built-in components of the Leaflet JavaScript API and only an hour or so of data analysis in Excel. Next goal? Adding <a href="http://palewi.re/posts/2012/03/26/leaflet-recipe-hover-events-features-and-polygons/">mouseover capabilities</a>.</p>

<p> </p>

        
      </section>

      <footer class="page__meta">
        
          <h4 class="page__meta-title"></h4>
        
        


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2012-08-06T05:53:43-04:00">August 06, 2012</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=carlvlewis&text=Visualizing 2012 census estimates using CartoDB and Leaflet http://localhost:4000/carlvlew.is/visualizing-latest-census-estimates-using-cartodb-and-leaflet/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/carlvlew.is/visualizing-latest-census-estimates-using-cartodb-and-leaflet/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http://localhost:4000/carlvlew.is/visualizing-latest-census-estimates-using-cartodb-and-leaflet/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/carlvlew.is/visualizing-latest-census-estimates-using-cartodb-and-leaflet/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="http://localhost:4000/carlvlew.is/response-to-bubble-trees-the-visualization-of-hierarchical-structures/" class="pagination--pager" title="What we can learn about charts from The WSJ Guide to Information Graphics
">Previous</a>
    
    
      <a href="http://localhost:4000/carlvlew.is/savswap-tackling-the-online-classified-ads-market/" class="pagination--pager" title="SavSwap: Tackling the online classified ads market
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
    <h4 class="page__comments-title">Leave a Comment</h4>
    <section id="disqus_thread"></section>
  
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/carlvlew.is/on-winning-a-code-for-america-fellowship/" rel="permalink">On being accepted as a 2019 Code for America fellow
</a>
      
    </h2>
    <p  class="page__meta">
  
    <span><i class="fa fa-clock-o" aria-hidden="true"></i>




  5 minute read
</span>,
  
  
    Posted on 
    <span>June 05, 2019</span>,
  
   
    by <span>Carl V. Lewis</span>
  
</p>
    <p class="archive__item-excerpt" itemprop="description">
      
        For as long as I’ve been working at the intersection of social impact and data and UX design, I’ve dreamed of being a Code for America Fellow.

      
    </p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/carlvlew.is/zircle-for-ecosystem-mapping/" rel="permalink">Zircle For Ecosystem Mapping
</a>
      
    </h2>
    <p  class="page__meta">
  
    <span><i class="fa fa-clock-o" aria-hidden="true"></i>




  less than 1 minute read
</span>,
  
  
    Posted on 
    <span>February 14, 2019</span>,
  
   
    by <span>Carl V. Lewis</span>
  
</p>
    <p class="archive__item-excerpt" itemprop="description">
      
        

      
    </p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/carlvlew.is/range-plots-to-visualize-opinion-gaps/" rel="permalink">Range plots ≠ dot plots
</a>
      
    </h2>
    <p  class="page__meta">
  
    <span><i class="fa fa-clock-o" aria-hidden="true"></i>




  5 minute read
</span>,
  
  
    Posted on 
    <span>July 14, 2018</span>,
  
   
    by <span>Carl V. Lewis</span>
  
</p>
    <p class="archive__item-excerpt" itemprop="description">
      
        Range plots always have seemed a bit elitist to me. It’s one of those types of charts that people who want to show how skilled they are at visualization use.

      
    </p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/carlvlew.is/my-week-at-openvisconf-2017-in-tweets/" rel="permalink">My week at OpenVisConf 2017 in tweets – or, how I learned to stop hating and be okay with Tableau
</a>
      
    </h2>
    <p  class="page__meta">
  
    <span><i class="fa fa-clock-o" aria-hidden="true"></i>




  13 minute read
</span>,
  
  
    Posted on 
    <span>April 26, 2017</span>,
  
   
    by <span>Carl V. Lewis</span>
  
</p>
    <p class="archive__item-excerpt" itemprop="description">
      
        I never thought I’d be so basic as to use Tableau Public, but it’s important to keep in mind the end goal of data visualization is insight, not technology or tools.

      
    </p>
  </article>
</div>
        
      </div>
    </div>
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/carlvlewis"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/carlvlewis"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/carlvlew.is/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 @carlvlewis. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="http://localhost:4000/carlvlew.is/assets/js/main.min.js"></script>









  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'carlvlewis';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






  </body>
</html>
